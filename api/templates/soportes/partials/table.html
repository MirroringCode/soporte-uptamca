<thead>
    <tr>
        <th>Motivo</th>
        <th>Atendido</th>
        <th>Técnico</th>
        <th>Solicitante</th>
        <th>Departamento</th>
        <th>Fecha</th>
        <th>Acciones</th>
    </tr>
</thead>
<tbody>
    {% for soporte in soportes %}
        <tr id="soporte-{{ soporte.id }}">
            <td>{{ soporte.motivo }}</td>
            <td>
                {% if soporte.atendido %}
                <span class="badge badge-success">Atendido</span>
                {% else %}
                <span class="badge badge-warning">Pendiente</span>
                {% endif %}
            </td>
            <td>{{ soporte.user.username or 'N/A' }}</td>
            <td>{{ (soporte.solicitante.nombre ~ ' ' ~ soporte.solicitante.apellido) if soporte.solicitante else 'N/A' }}</td>
            <td>{{ soporte.departamento.nombre or 'N/A' }}</td>
            <td>{{ soporte.fecha.strftime('%d-%m-%Y %H:%I %p') or 'N/A' }}</td>
            <td>
                {% if es_alerta %}
                <button onclick="editarAlerta.showModal()"
                hx-get="/api/soportes_form/{{ soporte.id }}?tipo_editar=alerta"
                hx-trigger="click"
                hx-target="#editar-alerta-container"
                class="btn btn-xs btn-primary">
                    Editar
                </button>
                {% else %}
                <button onclick="editarSoporte.showModal()"
                hx-get="/api/soportes_form/{{ soporte.id }}?tipo_editar=soporte"
                hx-trigger="click"
                hx-target="#editar-soporte-container"
                class="btn btn-xs btn-primary">
                    Editar
                </button>
                {% endif %}
                <button
                data-eliminar
                hx-delete="/api/soportes/{{ soporte.id }}"
                hx-trigger="click"
                hx-confirm="¿Está seguro de eliminar este soporte?"
                hx-target="[data-notification]"
                hx-target-4*="[data-notification]"
                hx-on::after-request="
                const toast = document.querySelector('[data-notification]');
                htmx.trigger(document.body, 'soporteDeleted');

                setTimeout(() => {
                    toast.innerHTML = '';
                }, 1500);
                "
                class="btn btn-xs my-[.75em] btn-error">
                    Eliminar
                </button>
            </td>
        </tr>
    {% endfor %}
</tbody>
